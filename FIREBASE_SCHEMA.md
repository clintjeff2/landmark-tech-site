# Firebase Firestore Schema - Landmark Technologies

**Document Version:** 1.0  
**Date:** January 6, 2026  
**Database Name:** landmark-tech-db  
**Project ID:** landmarktech  
**Last Updated:** January 6, 2026

---

## Database Structure Overview

```
landmark-tech-db/
├── classes/
├── pricing/
├── testimonials/
├── students/
├── metrics/
├── curriculum/
│   ├── modules/
│   └── projects/
├── contact/
├── pages/
├── faq_categories/
├── faq_items/
├── configuration/
└── logs/
```

**Note:** Testimonials collection stores both video and written testimonials with a `type` field ("video" or "written") to differentiate between them, rather than using subcollections.

---

## Collection Definitions

### **1. CLASSES COLLECTION** (`/classes`)

**Purpose:** Store all class/cohort information

**Documents:** `class_<number>` (e.g., `class_41`, `class_42`)

**Schema:**

```typescript
{
  id: string;                          // Auto-generated by Firestore
  number: number;                      // 41, 42, 43, etc.
  name: string;                        // "Class 41", "Advanced Class 42"
  status: "upcoming" | "active" | "completed" | "archived";
  startDate: Timestamp;                // Firestore Timestamp
  endDate: Timestamp;                  // Firestore Timestamp
  startTime: string;                   // "7:00 PM"
  endTime: string;                     // "10:00 PM"
  timezone: string;                    // "EST", "CST", "PST"
  daysOfWeek: string[];                // ["Monday", "Tuesday", "Saturday"]
  capacity: number;                    // Max students (e.g., 40)
  enrolled: number;                    // Current enrollment count
  description?: string;                // Course description
  isCurrentClass: boolean;             // Currently enrolling flag
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Example Document:**

```json
{
  "id": "class_41",
  "number": 41,
  "name": "Class 41",
  "status": "active",
  "startDate": "2025-09-27",
  "endDate": "2026-02-28",
  "startTime": "7:00 PM",
  "endTime": "10:00 PM",
  "timezone": "EST",
  "daysOfWeek": ["Monday", "Tuesday", "Saturday"],
  "capacity": 40,
  "enrolled": 28,
  "description": "Advanced DevOps & Cloud Engineering - Live cohort",
  "isCurrentClass": true,
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Indexes Recommended:**

- `isCurrentClass` (for quick lookup of current class)
- `status` (for filtering by status)
- `startDate` (for ordering by date)

---

### **2. PRICING COLLECTION** (`/pricing`)

**Purpose:** Store pricing information with payment methods

**Documents:** `pricing_<id>` or `class_<number>_pricing`

**Schema:**

```typescript
{
  id: string;
  classId: string;                     // Reference to class
  basePrice: number;                   // $3000
  currency: string;                    // "USD", "CAD"
  installmentAmount?: number;          // $750
  installmentPeriodMonths?: number;    // 4
  isRefundable: boolean;
  refundDeadlineDays?: number;         // 30
  moneyBackGuarantee: boolean;
  guaranteeDeadlineDays?: number;      // 60
  discountPercentage?: number;         // 10 (for early bird)
  discountValidUntil?: Timestamp;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Subcollection: `paymentMethods`** (under each pricing doc)

```typescript
{
  id: string;
  name: string;                        // "Zelle", "PayPal", "Bank Transfer", "MTN Momo"
  type: "digital" | "bank" | "mobile";
  email?: string;                      // For Zelle, PayPal
  accountNumber?: string;              // For bank transfers
  accountName?: string;
  bankName?: string;
  routingNumber?: string;              // US bank routing
  swiftCode?: string;                  // For international
  country?: string;                    // "USA", "Cameroon", "Nigeria"
  phoneNumber?: string;                // For mobile money (MTN, Orange)
  instructions?: string;               // Custom payment instructions
  isActive: boolean;
  order: number;                       // Display order
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Example Pricing Document:**

```json
{
  "id": "pricing_class_41",
  "classId": "class_41",
  "basePrice": 3000,
  "currency": "USD",
  "installmentAmount": 750,
  "installmentPeriodMonths": 4,
  "isRefundable": false,
  "moneyBackGuarantee": true,
  "guaranteeDeadlineDays": 60,
  "discountPercentage": null,
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Example Payment Method (Subcollection):**

```json
{
  "id": "zelle",
  "name": "Zelle",
  "type": "digital",
  "email": "fees@mylandmarktech.com",
  "instructions": "Send payment via Zelle to this email",
  "isActive": true,
  "order": 1,
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

---

### **3. TESTIMONIALS COLLECTION** (`/testimonials`)

**Purpose:** Store video and written testimonials in a single collection

**Documents:** `<id>` (auto-generated)

**Structure:** All testimonials are stored in one collection with a `type` field to differentiate:

- `type: "video"` for video testimonials
- `type: "written"` for written testimonials

#### **3A. Video Testimonials Schema**

```typescript
{
  id: string;
  type: "video";                       // Differentiator field
  youtubeId: string;                   // "Y_vLn0H8igg"
  title: string;                       // "Alex and Amaka's Success Story"
  description: string;
  thumbnail?: string;                  // URL or auto-generated
  graduateName?: string;
  position?: string;                   // "Senior Cloud Engineer"
  company?: string;                    // "Amazon"
  yearlySalary?: string;               // "$250,000"
  order: number;
  isActive: boolean;
  featuredOnHomepage: boolean;
  category?: string;                   // "Salary Success", "Career Change"
  tags: string[];                      // ["amazon", "consulting", "salary"]
  views?: number;
  publishedAt?: Timestamp;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **3B. Written Testimonials Schema**

```typescript
{
  id: string;
  type: "written";                     // Differentiator field
  graduateName: string;
  jobRole: string;                     // "Senior DevOps Engineer"
  company: string;
  profileImage?: string;               // URL to image
  testimonialText: string;             // Full testimonial
  yearlySalary: string;                // "$200,000"
  rating: number;                      // 1-5
  order: number;
  isActive: boolean;
  featuredOnHomepage: boolean;
  category?: string;
  tags: string[];
  jobTitle?: string;
  yearsExperienceBefore?: number;
  yearsExperienceAfter?: number;
  timeToGetJob?: string;               // "2 weeks"
  videoLink?: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Example Video Testimonial Document:**

```json
{
  "id": "testimonial_001",
  "type": "video",
  "youtubeId": "Y_vLn0H8igg",
  "title": "Alex and Amaka's Success Story",
  "description": "How they landed high-paying DevOps roles",
  "graduateName": "Alex & Amaka",
  "position": "Senior Cloud Engineers",
  "company": "Amazon",
  "yearlySalary": "$250,000+",
  "order": 1,
  "isActive": true,
  "featuredOnHomepage": true,
  "category": "Salary Success",
  "tags": ["amazon", "high-salary", "career-growth"],
  "views": 1250,
  "createdAt": "2025-06-15T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Example Written Testimonial Document:**

```json
{
  "id": "testimonial_002",
  "type": "written",
  "graduateName": "John Smith",
  "jobRole": "Senior DevOps Engineer",
  "company": "Amazon",
  "testimonialText": "The training was comprehensive and hands-on. I landed a job within 2 weeks of graduation.",
  "yearlySalary": "$200,000",
  "rating": 5,
  "order": 2,
  "isActive": true,
  "featuredOnHomepage": true,
  "category": "Success Story",
  "tags": ["amazon", "fast-placement", "high-salary"],
  "timeToGetJob": "2 weeks",
  "createdAt": "2025-07-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Querying Testimonials:**

```typescript
// Get all video testimonials
const videoQuery = query(
  collection(db, "testimonials"),
  where("type", "==", "video"),
  where("isActive", "==", true)
);

// Get all written testimonials
const writtenQuery = query(
  collection(db, "testimonials"),
  where("type", "==", "written"),
  where("isActive", "==", true)
);

// Get featured testimonials (both types)
const featuredQuery = query(
  collection(db, "testimonials"),
  where("featuredOnHomepage", "==", true),
  where("isActive", "==", true)
);
```

---

### **4. STUDENTS COLLECTION** (`/students`)

**Purpose:** Store student registration information from the public registration form

**Documents:** `<id>` (auto-generated)

**Schema:**

```typescript
{
  id: string;
  fullName: string;                    // Student's full name
  email: string;                       // Student's email address
  phone: string;                       // Phone number with country code
  country: string;                     // Country of residence
  city: string;                        // City of residence
  cohort: string;                      // "Class 41 - Sept 27, 2025"
  skillLevel: string;                  // "No IT Background", "Some IT Knowledge", "Intermediate", "Advanced"
  hearAboutUs: string;                 // Source: "YouTube", "Google Search", "LinkedIn", "Facebook", "Friend/Colleague Referral", "Alumni Referral", "WhatsApp", "Telegram", "Other"
  additionalComments?: string;         // Optional notes or questions
  enrollmentStatus: "pending" | "approved" | "rejected" | "enrolled" | "completed";  // Student status
  createdAt: Timestamp;                // Registration timestamp
  updatedAt: Timestamp;                // Last update timestamp
}
```

**Example Student Document:**

```json
{
  "id": "student_001",
  "fullName": "John Doe",
  "email": "john.doe@example.com",
  "phone": "+1-555-123-4567",
  "country": "United States",
  "city": "New York",
  "cohort": "Class 41 - Sept 27, 2025",
  "skillLevel": "Some IT Knowledge",
  "hearAboutUs": "YouTube",
  "additionalComments": "Very interested in DevOps and cloud technologies",
  "enrollmentStatus": "pending",
  "createdAt": "2026-01-07T10:30:00Z",
  "updatedAt": "2026-01-07T10:30:00Z"
}
```

**Querying Students:**

```typescript
// Get all pending student registrations
const pendingQuery = query(
  collection(db, "students"),
  where("enrollmentStatus", "==", "pending"),
  orderBy("createdAt", "desc")
);

// Get students from a specific cohort
const cohortQuery = query(
  collection(db, "students"),
  where("cohort", "==", "Class 41 - Sept 27, 2025")
);

// Get enrolled students count
const enrolledQuery = query(
  collection(db, "students"),
  where("enrollmentStatus", "==", "enrolled")
);
```

---

### **5. METRICS COLLECTION** (`/metrics`)

**Purpose:** Store company-wide metrics and statistics

**Documents:** `company_metrics` (single document)

**Schema:**

```typescript
{
  id: "company_metrics";
  totalGraduates: number;              // 5000
  jobPlacementRate: number;            // 95 (percentage)
  averageSalary: number;               // 150000
  averageSalaryCurrency: string;       // "USD"
  enterpriseClients: number;           // 50
  clientProjectValue: number;          // 500000
  yearsInBusiness: number;             // 18
  countriesReached: number;            // 50
  courseModules: number;               // 15
  courseDurationHours: number;         // 206
  realWorldProjects: number;           // 6
  graduatesConsultingSuccessRate?: number; // 20
  averageConsultingSalary?: number;    // 200000
  timeToFirstJobDays?: number;         // 45
  studentSatisfactionRate?: number;    // 98
  updatedAt: Timestamp;
}
```

**Example:**

```json
{
  "id": "company_metrics",
  "totalGraduates": 5000,
  "jobPlacementRate": 95,
  "averageSalary": 150000,
  "averageSalaryCurrency": "USD",
  "enterpriseClients": 50,
  "clientProjectValue": 500000,
  "yearsInBusiness": 18,
  "countriesReached": 50,
  "courseModules": 15,
  "courseDurationHours": 206,
  "realWorldProjects": 6,
  "graduatesConsultingSuccessRate": 20,
  "averageConsultingSalary": 200000,
  "timeToFirstJobDays": 45,
  "studentSatisfactionRate": 98,
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

---

### **5. CURRICULUM COLLECTION** (`/curriculum`)

**Purpose:** Store course curriculum including modules and projects

**Subcollections:** `modules/`, `projects/`

#### **5A. Modules** (`/curriculum/modules`)

**Documents:** `module_<number>`

**Schema:**

```typescript
{
  id: string;
  number: number;                      // 1-15
  title: string;                       // "Linux Fundamentals"
  duration: string;                    // "27 hours"
  durationHours: number;               // 27 (numeric)
  description?: string;
  topics: string[];                    // ["Linux basics", "CLI", "Permissions"]
  order: number;
  isActive: boolean;
  prerequisites?: string[];            // IDs of prerequisite modules
  skills: string[];                    // Tags like "Linux", "Jenkins"
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **5B. Projects** (`/curriculum/projects`)

**Documents:** `project_<number>`

**Schema:**

```typescript
{
  id: string;
  number: number;                      // 1-6
  title: string;                       // "Deploy Microservices to Kubernetes"
  description: string;
  technologies: string[];              // ["Kubernetes", "Docker", "AWS"]
  duration?: string;
  difficulty: "Beginner" | "Intermediate" | "Advanced";
  order: number;
  isActive: boolean;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Example Module:**

```json
{
  "id": "module_1",
  "number": 1,
  "title": "Linux Fundamentals",
  "duration": "27 hours",
  "durationHours": 27,
  "description": "Master Linux command line, file system, and permissions",
  "topics": [
    "Linux Basics",
    "CLI",
    "File System",
    "Permissions",
    "User Management"
  ],
  "order": 1,
  "isActive": true,
  "skills": ["Linux", "Bash", "CLI"],
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

---

### **6. CONTACT COLLECTION** (`/contact`)

**Purpose:** Store contact information and regional payment methods

**Subcollections:** `phones/`, `emails/`, `social/`, `regional_payment/`

#### **6A. Phone Numbers** (`/contact/phones`)

**Documents:** `phone_<id>`

```typescript
{
  id: string;
  number: string;                      // "+1-437-215-2483"
  type: "main" | "whatsapp" | "telegram" | "support";
  country?: string;
  isActive: boolean;
  order: number;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **6B. Email Addresses** (`/contact/emails`)

**Documents:** `email_<id>`

```typescript
{
  id: string;
  email: string; // "mylandmarktech@gmail.com"
  type: "general" | "support" | "billing" | "partnerships";
  isActive: boolean;
  order: number;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **6C. Social Links** (`/contact/social`)

**Documents:** `social_<platform>`

```typescript
{
  id: string;
  platform: string;                    // "youtube", "linkedin", "facebook", "twitter"
  url: string;
  icon?: string;
  order: number;
  isActive: boolean;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **6D. Regional Payment Info** (`/contact/regional_payment`)

**Documents:** `payment_<country>`

```typescript
{
  id: string;
  country: string;                     // "Cameroon", "Nigeria", "USA"
  methodName: string;                  // "MTN Momo", "Access Bank"
  accountName?: string;
  accountNumber?: string;
  phoneNumber?: string;
  bankName?: string;
  amount?: number;
  amountCurrency?: string;
  instructions: string;
  isActive: boolean;
  order: number;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

---

### **7. PAGES COLLECTION** (`/pages`)

**Purpose:** Store dynamic page content

**Subcollections:** `content/`, `metadata/`

#### **7A. Page Content** (`/pages/content`)

**Documents:** `<pageSlug>_<sectionId>`

```typescript
{
  id: string;
  pageSlug: string;                    // "courses", "about", "services"
  sectionId: string;                   // "hero", "cta", "stats"
  title?: string;
  subtitle?: string;
  description?: string;
  content?: string;                    // Rich text/markdown
  ctaText?: string;
  ctaLink?: string;
  imageUrl?: string;
  order: number;
  isActive: boolean;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **7B. Page Metadata** (`/pages/metadata`)

**Documents:** `<pageSlug>`

```typescript
{
  id: string;
  pageSlug: string;
  seoTitle: string;
  seoDescription: string;
  ogImage?: string;
  canonical?: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

---

### **8. FAQ COLLECTION** (`/faq_categories` and `/faq_items`)

**Purpose:** Store FAQ items organized by category

**Note:** FAQ uses two separate flat collections instead of subcollections to comply with Firestore's odd-numbered segment requirement.

#### **8A. FAQ Categories** (`/faq_categories`)

**Documents:** `<id>` (auto-generated)

```typescript
{
  id: string;
  name: string;                        // "Eligibility & Enrollment"
  slug?: string;                       // "eligibility-enrollment"
  description?: string;
  order: number;
  isActive: boolean;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### **8B. FAQ Items** (`/faq_items`)

**Documents:** `<id>` (auto-generated)

```typescript
{
  id: string;
  categoryId: string;                  // Reference to category ID
  question: string;
  answer: string;                      // Rich text/markdown
  order: number;
  isActive: boolean;
  helpful?: number;                    // Vote count
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

**Example FAQ Category Document:**

```json
{
  "id": "category_001",
  "name": "Eligibility & Enrollment",
  "slug": "eligibility-enrollment",
  "description": "Questions about course eligibility and enrollment process",
  "order": 1,
  "isActive": true,
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Example FAQ Item Document:**

```json
{
  "id": "item_001",
  "categoryId": "category_001",
  "question": "What are the prerequisites for the DevOps course?",
  "answer": "You need basic Linux knowledge and familiarity with command line. Experience with cloud platforms is helpful but not required.",
  "order": 1,
  "isActive": true,
  "helpful": 45,
  "createdAt": "2025-09-20T10:30:00Z",
  "updatedAt": "2026-01-06T15:45:00Z"
}
```

**Querying FAQ Items:**

```typescript
// Get all items for a specific category
const categoryItemsQuery = query(
  collection(db, "faq_items"),
  where("categoryId", "==", "category_001"),
  where("isActive", "==", true),
  orderBy("order", "asc")
);

// Get all active categories
const categoriesQuery = query(
  collection(db, "faq_categories"),
  where("isActive", "==", true),
  orderBy("order", "asc")
);
```

---

### **9. CONFIGURATION COLLECTION** (`/configuration`)

**Purpose:** Store site-wide configuration and feature flags

**Documents:** `site_config` (single document)

**Schema:**

```typescript
{
  id: "site_config";
  maintenanceMode: boolean;
  announcementBanner?: {
    text: string;
    backgroundColor: string;
    textColor: string;
    isActive: boolean;
  };
  googleAnalyticsId?: string;
  features: {
    enableRegistration: boolean;
    enableTestimonials: boolean;
    enableConsultingCTA: boolean;
    enableJobBoard?: boolean;
  };
  updatedAt: Timestamp;
}
```

---

### **10. LOGS COLLECTION** (`/logs`)

**Purpose:** Audit trail for all admin actions and system activities

**Documents:** `<id>` (auto-generated)

**Schema:**

```typescript
{
  id: string;
  adminId: string;                     // Firebase UID
  adminEmail: string;                  // Admin's email address
  action: string;                      // "create", "update", "delete", "login", "logout"
  collection: string;                  // "pricing", "testimonials", "auth", etc.
  documentId?: string;                 // ID of the document affected
  documentTitle?: string;              // Human-readable title (e.g., "Pricing for Class 41")
  changesBefore?: Record<string, any>; // Previous values (for updates)
  changesAfter?: Record<string, any>;  // New values (for creates/updates)
  status: "success" | "error";         // Whether the action succeeded
  errorMessage?: string;               // Error details if status is "error"
  timestamp: Timestamp;                // When the action occurred
  ip?: string;                         // Optional: client IP address
  userAgent?: string;                  // Optional: browser/client information
}
```

**Automatic Logging:**

All CRUD operations are automatically logged with the following information:

- **Create**: Logs new document creation with all field values
- **Update**: Logs both before and after values for changed fields
- **Delete**: Logs the deletion with document identifier
- **Login**: Logs user authentication events
- **Logout**: Logs session termination
- **Errors**: Logs any failed operations with error messages

**Example Logs:**

```json
{
  "id": "log_001",
  "adminId": "firebase_uid_123",
  "adminEmail": "jasio@landmark.com",
  "action": "create",
  "collection": "pricing",
  "documentId": "pricing_class_42",
  "documentTitle": "Pricing for Class 42",
  "changesAfter": {
    "classId": "class_42",
    "basePrice": 3500,
    "currency": "USD",
    "installmentAmount": 875,
    "isRefundable": true
  },
  "status": "success",
  "timestamp": "2026-01-06T16:30:00Z"
}
```

```json
{
  "id": "log_002",
  "adminId": "firebase_uid_123",
  "adminEmail": "jasio@landmark.com",
  "action": "update",
  "collection": "pricing",
  "documentId": "pricing_class_41",
  "documentTitle": "Pricing for Class 41",
  "changesBefore": {
    "basePrice": 3000
  },
  "changesAfter": {
    "basePrice": 3200
  },
  "status": "success",
  "timestamp": "2026-01-06T16:35:00Z"
}
```

```json
{
  "id": "log_003",
  "adminId": "firebase_uid_123",
  "adminEmail": "jasio@landmark.com",
  "action": "delete",
  "collection": "testimonials",
  "documentId": "testimonial_001",
  "documentTitle": "Alex and Amaka's Success Story",
  "status": "success",
  "timestamp": "2026-01-06T16:40:00Z"
}
```

```json
{
  "id": "log_004",
  "adminId": "firebase_uid_123",
  "adminEmail": "jasio@landmark.com",
  "action": "login",
  "collection": "auth",
  "status": "success",
  "timestamp": "2026-01-06T08:00:00Z"
}
```

```json
{
  "id": "log_005",
  "adminId": "firebase_uid_123",
  "adminEmail": "jasio@landmark.com",
  "action": "create",
  "collection": "pricing",
  "documentId": "pricing_class_43",
  "status": "error",
  "errorMessage": "Class ID is required",
  "timestamp": "2026-01-06T16:45:00Z"
}
```

**Logs Page Features:**

- **Filter by Action**: View only specific types of actions (Create, Update, Delete, Login, Logout)
- **Filter by Collection**: View activities for specific collections (Classes, Pricing, Testimonials, etc.)
- **Filter by Admin**: Search logs by admin email address
- **Status Indicators**: Visual indicators for success (✓ green) and error (✗ red) status
- **Timestamps**: All actions are recorded with precise server timestamps
- **Audit Trail**: Complete history of who did what and when
- **Error Tracking**: Failed operations are logged with error messages for debugging

**Best Practices:**

✅ All admin actions are automatically logged  
✅ Sensitive operations include before/after snapshots  
✅ Authentication events are tracked  
✅ Error conditions are recorded for troubleshooting  
✅ Logs are immutable (cannot be modified, only viewed or deleted by admin)  
✅ Timestamps are server-side for accuracy

---

## Firestore Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Admin-only access to most collections
    match /classes/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /pricing/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /testimonials/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /students/{document=**} {
      allow create: if true;  // Allow public registration
      allow read: if request.auth != null && hasRole('admin');  // Admin-only read
      allow update, delete: if request.auth != null && hasRole('admin');  // Admin-only modification
    }

    match /metrics/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /curriculum/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /contact/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /pages/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /faq_categories/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /faq_items/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /configuration/{document=**} {
      allow read: if true;
      allow create, update, delete: if request.auth != null && hasRole('admin');
    }

    match /logs/{document=**} {
      allow read: if request.auth != null && hasRole('admin');
      allow create: if request.auth != null;
      allow delete: if false;  // Logs are immutable
    }

    // Helper function
    function hasRole(role) {
      return get(/databases/$(database)/documents/admins/$(request.auth.uid)).data.role == role;
    }
  }
}
```

---

## Collection Statistics

| Collection          | Est. Documents | Growth Rate | Read Heavy? |
| ------------------- | -------------- | ----------- | ----------- |
| classes             | 50-100         | Slow        | No          |
| pricing             | 50-100         | Slow        | Yes         |
| testimonials        | 200+           | Medium      | Yes         |
| students            | Grows daily    | Medium      | Yes         |
| metrics             | 1              | Very Slow   | Yes         |
| curriculum/modules  | 15-20          | Very Slow   | Yes         |
| curriculum/projects | 6-10           | Very Slow   | Yes         |
| contact/\*          | 20-50          | Very Slow   | Yes         |
| pages/\*            | 50-100         | Slow        | Yes         |
| faq_categories      | 10-20          | Very Slow   | Yes         |
| faq_items           | 100+           | Slow        | Yes         |
| configuration       | 1              | Very Slow   | Yes         |
| logs                | Grows daily    | Fast        | No          |

---

## Data Migration Strategy

### **Initial Setup:**

1. Create all collections manually in Firestore console
2. Add sample documents for each collection type
3. Test security rules in Firestore console
4. Verify read/write permissions

### **From Hardcoded to Firestore:**

After admin panel is 100% complete:

1. Export hardcoded data to JSON
2. Create admin interface to bulk import
3. Verify data integrity
4. Update public pages to read from Firestore
5. Keep hardcoded values as fallback temporarily
6. Monitor for issues
7. Remove hardcoded values completely

---

## Performance Optimization

### **Indexes to Create:**

```
Collection: classes
- Fields: isCurrentClass (Ascending), status (Ascending)
- Fields: startDate (Ascending), status (Ascending)

Collection: testimonials
- Fields: type (Ascending), isActive (Ascending), featuredOnHomepage (Ascending)
- Fields: type (Ascending), isActive (Ascending), order (Ascending)

Collection: curriculum/modules
- Fields: isActive (Ascending), order (Ascending)

Collection: faq_items
- Fields: categoryId (Ascending), isActive (Ascending), order (Ascending)

Collection: logs
- Fields: timestamp (Descending)
- Fields: adminId (Ascending), timestamp (Descending)
```

---

## Backup & Recovery

### **Firestore Automatic Backups:**

- Enable daily automatic backups in Firestore console
- Set retention to 90 days
- Store backup exports in Google Cloud Storage

### **Manual Backups:**

```bash
# Export collection to JSON
gcloud firestore export gs://your-bucket/backup_$(date +%Y%m%d)

# Restore from backup
gcloud firestore import gs://your-bucket/backup_20260106
```

---

## Summary

This schema provides:

✅ **Complete coverage** of all dynamic content  
✅ **Efficient querying** with proper indexes  
✅ **Secure access** with role-based permissions  
✅ **Audit trails** for all changes  
✅ **Scalability** as content grows  
✅ **Easy management** through admin panel

Ready to implement the admin panel!
